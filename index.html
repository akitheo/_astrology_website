<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Welcome to Astrology World</title>
    <style>
        body {
            font-family: 'Times New Roman', Times, serif;
            line-height: 1.6;
            margin: 0;
            padding: 0;
            background-color: #f4f4f4;
        }

        header {
            position: relative;
            overflow: hidden;
        }

        video {
            width: 100%;
            height: auto;
            position: absolute;
            z-index: -1;
        }

        .header-content {
            background-color: rgba(0, 0, 0, 0.7);
            color: white;
            padding: 1em;
            text-align: center;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        nav ul {
            list-style: none;
            margin: 0;
            padding: 0;
        }

        nav ul li {
            display: inline;
            margin-right: 10px;
        }

        section {
            padding: 20px;
        }

        footer {
            background-color: #333;
            color: white;
            padding: 1em;
            text-align: center;
            position: fixed;
            bottom: 0;
            width: 100%;
        }

        .astrologer-image {
            max-width: 100px;
            max-height: 100px;
            border-radius: 50%;
            margin-right: 20px;
        }

        .blink-box {
            animation: blink 1s infinite;
            padding: 15px;
            border-radius: 10px;
            display: inline-block;
            margin-top: 20px;
            background-color: #ff3333; /* Red */
        }

        @keyframes blink {
            0% { background-color: #333; color: white; }
            50% { background-color: #fff; color: #333; }
            100% { background-color: #333; color: white; }
        }

        #services p {
            color: #000080; /* Navy Blue */
        }

        #booking a {
            color: #ff3333; /* Red */
            text-decoration: none;
            font-weight: bold;
        }

        .contact-info {
            margin-top: 20px;
        }

        .contact-info p {
            margin: 5px 0;
        }
table {
        width: 100%;
        border-collapse: collapse;
        margin-bottom: 20px;
    }
 
    th, td {
        border: 1px solid #ddd;
        padding: 8px;
        text-align: center;
    }
 
    th {
        background-color: #f2f2f2;
    }
 
    .slot {
        cursor: pointer;
        background-color: #4CAF50;
        color: white;
    }
 
        
   #bookingForm {
            display: none;
            background-color: #fff;
            padding: 20px;
            border-radius: 10px;
            position: fixed;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            z-index: 999;
        }

       #bookingForm label,
    #bookingForm input {
        display: block;
        margin-bottom: 10px;
    }
 
    #bookingForm button {
        background-color: #4CAF50;
        color: white;
        padding: 10px;
        border: none;
        cursor: pointer;
    }
       .calendar-table {
            width: 100%;
            border-collapse: collapse;
            margin-top: 10px;
        }

        .calendar-table th,
        .calendar-table td {
            border: 1px solid #ddd;
            padding: 8px;
            text-align: center;
            cursor: pointer;
        }
    </style>
    <script src="https://cdn.emailjs.com/dist/email.min.js"></script>

</head>
<body>

<header>
    <video autoplay loop muted>
        <source src="IMG/astro.mp4" type="video/mp4">
        Your browser does not support the video tag.
    </video>
    <div class="header-content">
        <img src="IMG/Media.jpg" alt="Astrologer Image" class="astrologer-image">
        <div>
            <h1>Astrology Consultation Booking</h1>
            <nav>
                <ul>
                    <li><a href="#home">Home</a></li>
                    <li><a href="#services">Services</a></li>
                    <li><a href="#booking">Booking</a></li>
                    <li><a href="#contact">Contact</a></li>
                </ul>
            </nav>
        </div>
    </div>
</header>

<section id="home" style="background-color: #f8f8f8; padding: 30px; text-align: center;">
    <div style="text-align: center; padding: 20px;">
        <img src="IMG/astro.jpg" alt="ASTRO" style="max-width: 100%; border-radius: 10px;">
    </div>
    <div style="text-align: center;">
        <h2>Welcome to the Cosmic Guidance Center</h2>
        <p>Unlock the secrets of the stars and discover the profound insights they hold for you. At the Cosmic Guidance Center, our team of skilled astrologers is dedicated to providing you with a transformative experience. From personalized one-on-one consultations to detailed chart readings and mystical card readings, our services are designed to guide you on your unique journey.</p>
        <p>Immerse yourself in the ancient wisdom of astrology and let our astrologers unveil the celestial map of your life. Whether you seek clarity on relationships, career choices, or spiritual growth, our cosmic experts are here to assist you.</p>
        <div class="blink-box">
            <a href="#booking">Book a Consultation</a>
        </div>
    </div>
</section>

<section id="services">
    <h2>Our Services</h2>
    <p>Embark on a personalized journey with our one-to-one consultation services, where our experienced astrologers provide insights tailored just for you. Explore the intricacies of your birth chart through our in-depth chart reading sessions, unraveling the cosmic mysteries that shape your unique personality and destiny. Dive into the mystical realm of card reading, where ancient wisdom meets modern guidance, offering clarity and foresight into your life's path. Additionally, we offer a variety of specialized astrology services, including compatibility analysis, career guidance, and spiritual counseling. Let our skilled astrologers illuminate the celestial map of your life, guiding you towards a future filled with cosmic harmony and self-discovery.</p>
    <!-- Add more content as needed -->
</section>

<!-- Add the following code within the #booking section -->
    
<section id="booking">
    <h2>Book a Consultation</h2>
    <p>Choose your Preferable Time and make the seat for you</p>

    <div id="calendar"></div>

    <table id="availabilityTable" style="width: 100%;">
        <caption>Availability Schedule</caption>
        <thead>
            <tr>
                <th></th> <!-- Empty cell for day names -->
                <th>8:00 PM - 8:30 PM</th>
                <th>8:30 PM - 9:00 PM</th>
                <th>9:00 PM - 9:30 PM</th>
                <th>9:30 PM - 10:00 PM</th>
                <th>10:00 PM - 10:30 PM</th>
            </tr>
        </thead>
        <tbody>

            <script>
        <script>
        function showBookingForm(day, date, time) {
            // Customize this function based on your needs (e.g., show a modal)
            document.getElementById('bookingForm').style.display = 'block';
            document.getElementById('selectedDay').value = day;
            document.getElementById('selectedDate').value = date;
            document.getElementById('selectedTime').value = time;
            console.log('Booking for ' + day + ' on ' + date + ' at ' + time);
        }
                
        function generateCalendar(month, year) {
            var calendarContainer = document.getElementById('calendar');

            // Clear any existing content in the calendar container
            calendarContainer.innerHTML = '';

            var firstDay = new Date(year, month, 1);
            var lastDay = new Date(year, month + 1, 0);
            var dateCounter = 1;

            var calendarTable = document.createElement('table');
            calendarTable.className = 'calendar-table';

            // Create the header row with day names
            var headerRow = document.createElement('tr');
            var dayNames = ['Su', 'Mo', 'Tu', 'We', 'Th', 'Fr', 'Sa'];
            for (var i = 0; i < dayNames.length; i++) {
                var dayCell = document.createElement('th');
                dayCell.textContent = dayNames[i];
                headerRow.appendChild(dayCell);
            }
            calendarTable.appendChild(headerRow);

            // Create rows for each week
            for (var i = 0; i < 6; i++) {
                var weekRow = document.createElement('tr');

                // Create cells for each day in the week
                for (var j = 0; j < 7; j++) {
                    var dateCell = document.createElement('td');

                    if (i === 0 && j < firstDay.getDay()) {
                        // Empty cells before the first day
                        dateCell.textContent = '';
                    } else if (dateCounter > lastDay.getDate()) {
                        // Empty cells after the last day
                        dateCell.textContent = '';
                    } else {
                        // Cells with date and onclick event
                        dateCell.textContent = dateCounter;
                        var dateObj = new Date(year, month, dateCounter);
                        dateCell.setAttribute('data-date', dateObj.toISOString().split('T')[0]);
                        dateCell.addEventListener('click', function () {
                            showBookingForm(this.getAttribute('data-day'), this.getAttribute('data-date'), 'Selected Time');
                        });
                        dateCounter++;
                    }

                    weekRow.appendChild(dateCell);
                }

                calendarTable.appendChild(weekRow);
            }

            // Append the calendar table to the container
            calendarContainer.appendChild(calendarTable);
        }

               // Function to update the table with dynamically generated dates
function updateTable() {
    var dates = generateDates();
    var table = document.getElementById('availabilityTable');
    if (table) {
        var rows = table.getElementsByTagName('tr');
        for (var i = 1; i < rows.length; i++) {  // Start from index 1 to skip the header row
            var cells = rows[i].getElementsByTagName('td');
            for (var j = 1; j < cells.length; j++) {  // Start from index 1 to skip the day column
                var date = dates[j - 1];  // Use j - 1 to align with the dates array
                cells[j].setAttribute('data-date', date);
                cells[j].setAttribute('onclick', "showBookingForm('" + cells[0].innerText + "', '" + date + "', '" + cells[j].innerText + "')");
            }
        }
    } else {
        console.error('Table not found');
    }
}
window.onload = function () {
            var currentDate = new Date();
            updateTable();
            generateCalendar(currentDate.getMonth(), currentDate.getFullYear());
        };
    </script>
            <!-- Monday -->
            <!-- Monday -->
<tr>
    <td>Monday</td>
    <td class="slot" data-day="Monday" data-time="8:00 PM - 8:30 PM" onclick="showBookingForm('Monday', '8:00 PM - 8:30 PM')">Half Hour Session</td>
    <td class="slot" data-day="Monday" data-time="8:30 PM - 9:00 PM" onclick="showBookingForm('Monday', '8:30 PM - 9:00 PM')">Half Hour Session</td>
    <td colspan="2" class="slot" data-day="Monday" data-time="9:00 PM - 10:00 PM" onclick="showBookingForm('Monday', '9:00 PM - 10:00 PM')">One Hour Session</td>
    <td class="slot" data-day="Monday" data-time="10:00 PM - 10:30 PM" onclick="showBookingForm('Monday', '10:00 PM - 10:30 PM')">Half Hour Session</td>
</tr>

<!-- Tuesday -->
<tr>
    <td>Tuesday</td>
    <td class="slot" data-day="Tuesday" data-time="8:00 PM - 8:30 PM" onclick="showBookingForm('Tuesday', '8:00 PM - 8:30 PM')">Half Hour Session</td>
    <td class="slot" data-day="Tuesday" data-time="8:30 PM - 9:00 PM" onclick="showBookingForm('Tuesday', '8:30 PM - 9:00 PM')">Half Hour Session</td>
    <td colspan="2" class="slot" data-day="Tuesday" data-time="9:00 PM - 10:00 PM" onclick="showBookingForm('Tuesday', '9:00 PM - 10:00 PM')">One Hour Session</td>
    <td class="slot" data-day="Tuesday" data-time="10:00 PM - 10:30 PM" onclick="showBookingForm('Tuesday', '10:00 PM - 10:30 PM')">Half Hour Session</td>
</tr>

<!-- Wednesday -->
<tr>
    <td>Wednesday</td>
    <td class="slot" data-day="Wednesday" data-time="8:00 PM - 8:30 PM" onclick="showBookingForm('Wednesday', '8:00 PM - 8:30 PM')">Half Hour Session</td>
    <td class="slot" data-day="Wednesday" data-time="8:30 PM - 9:00 PM" onclick="showBookingForm('Wednesday', '8:30 PM - 9:00 PM')">Half Hour Session</td>
    <td colspan="2" class="slot" data-day="Wednesday" data-time="9:00 PM - 10:00 PM" onclick="showBookingForm('Wednesday', '9:00 PM - 10:00 PM')">One Hour Session</td>
    <td class="slot" data-day="Wednesday" data-time="10:00 PM - 10:30 PM" onclick="showBookingForm('Wednesday', '10:00 PM - 10:30 PM')">Half Hour Session</td>
</tr>

<!-- Thursday -->
<tr>
    <td>Thursday</td>
    <td class="slot" data-day="Thursday" data-time="8:00 PM - 8:30 PM" onclick="showBookingForm('Thursday', '8:00 PM - 8:30 PM')">Half Hour Session</td>
    <td class="slot" data-day="Thursday" data-time="8:30 PM - 9:00 PM" onclick="showBookingForm('Thursday', '8:30 PM - 9:00 PM')">Half Hour Session</td>
    <td colspan="2" class="slot" data-day="Thursday" data-time="9:00 PM - 10:00 PM" onclick="showBookingForm('Thursday', '9:00 PM - 10:00 PM')">One Hour Session</td>
    <td class="slot" data-day="Thursday" data-time="10:00 PM - 10:30 PM" onclick="showBookingForm('Thursday', '10:00 PM - 10:30 PM')">Half Hour Session</td>
</tr>

<!-- Friday -->
<tr>
    <td>Friday</td>
    <td class="slot" data-day="Friday" data-time="8:00 PM - 8:30 PM" onclick="showBookingForm('Friday', '8:00 PM - 8:30 PM')">Half Hour Session</td>
    <td class="slot" data-day="Friday" data-time="8:30 PM - 9:00 PM" onclick="showBookingForm('Friday', '8:30 PM - 9:00 PM')">Half Hour Session</td>
    <td colspan="2" class="slot" data-day="Friday" data-time="9:00 PM - 10:00 PM" onclick="showBookingForm('Friday', '9:00 PM - 10:00 PM')">One Hour Session</td>
    <td class="slot" data-day="Friday" data-time="10:00 PM - 10:30 PM" onclick="showBookingForm('Friday', '10:00 PM - 10:30 PM')">Half Hour Session</td>
</tr>

<!-- Saturday -->
<tr>
    <td>Saturday</td>
    <td class="slot" data-day="Saturday" data-time="8:00 PM - 8:30 PM" onclick="showBookingForm('Saturday', '8:00 PM - 8:30 PM')">Half Hour Session</td>
    <td class="slot" data-day="Saturday" data-time="8:30 PM - 9:00 PM" onclick="showBookingForm('Saturday', '8:30 PM - 9:00 PM')">Half Hour Session</td>
    <td colspan="2" class="slot" data-day="Saturday" data-time="9:00 PM - 10:00 PM" onclick="showBookingForm('Saturday', '9:00 PM - 10:00 PM')">One Hour Session</td>
    <td class="slot" data-day="Saturday" data-time="10:00 PM - 10:30 PM" onclick="showBookingForm('Saturday', '10:00 PM - 10:30 PM')">Half Hour Session</td>
</tr>

<!-- Sunday -->
<tr>
    <td>Sunday</td>
    <td class="slot" data-day="Sunday" data-time="8:00 PM - 8:30 PM" onclick="showBookingForm('Sunday', '8:00 PM - 8:30 PM')">Half Hour Session</td>
    <td class="slot" data-day="Sunday" data-time="8:30 PM - 9:00 PM" onclick="showBookingForm('Sunday', '8:30 PM - 9:00 PM')">Half Hour Session</td>
    <td colspan="2" class="slot" data-day="Sunday" data-time="9:00 PM - 10:00 PM" onclick="showBookingForm('Sunday', '9:00 PM - 10:00 PM')">One Hour Session</td>
    <td class="slot" data-day="Sunday" data-time="10:00 PM - 10:30 PM" onclick="showBookingForm('Sunday', '10:00 PM - 10:30 PM')">Half Hour Session</td>
</tr>

        </tbody>
    </table>
</section>


    <!-- Add the following code for the form -->
<div id="bookingForm">
    <h3>Booking Information</h3>
    <form id="userBookingForm">
        <label for="firstName">First Name:</label>
        <input type="text" id="firstName" name="firstName" required>
        
        <label for="lastName">Last Name:</label>
        <input type="text" id="lastName" name="lastName" required>
        
        <label for="dob">Date of Birth:</label>
        <input type="date" id="dob" name="dob" required>
        
        <label for="birthTime">Birth Time:</label>
        <input type="time" id="birthTime" name="birthTime" required>
        
        <label for="phoneNumber">Phone Number:</label>
        <input type="tel" id="phoneNumber" name="phoneNumber" required>
        
        <label for="email">Email:</label>
        <input type="email" id="email" name="email" required>

        <!-- Add hidden input fields to store selected day and time -->
        <input type="hidden" id="selectedDay" name="selectedDay">
        <input type="hidden" id="selectedTime" name="selectedTime">
         <input type="hidden" id="selectedDate" name="selectedDate">

        <button type="button" onclick="submitBookingForm()">Submit</button>
        <button type="button" onclick="cancelBookingForm()">Cancel</button>
    </form>
</div>

<script>
var formData; // Declare formData globally
function submitBookingForm() {
    // Get form data
    var form = document.getElementById('userBookingForm');
    var formData = new FormData(form);

    // Get selected day and time
    var selectedDay = document.getElementById('selectedDay').value;
    var selectedDate = document.getElementById('selectedDate').value;
    var selectedTime = document.getElementById('selectedTime').value;

    // Make an AJAX request to submit the form to Formspree
    var xhr = new XMLHttpRequest();
    xhr.open(form.method, form.action, true);
    xhr.setRequestHeader('Accept', 'application/json');
    xhr.onreadystatechange = function () {
        if (xhr.readyState == 4) {
            if (xhr.status == 200 || xhr.status == 201) {
                // Successful form submission
                console.log('Form submitted successfully:', xhr.responseText);

                // Pass formData to sendConfirmationEmail
                sendConfirmationEmail(
                    formData,
                    selectedDay,
                    selectedTime
                );

                // Redirect to the custom success page
                window.location.href = 'success.html';
            } else {
                // Form submission failed
                console.error('Form submission failed:', xhr.responseText);
                alert('Booking failed. Please try again later.');
            }

            // Close the form after submission
            document.getElementById('bookingForm').style.display = 'none';
        }
    };
    xhr.send(formData);
}
    
function cancelBookingForm() {
    // Close the form
    document.getElementById('bookingForm').style.display = 'none';
}
</script>
<script>
// Initialize Email.js with your Public Key
emailjs.init("5HL5c-zK1CReL-Pnw");

function sendConfirmationEmail(formData, selectedDay, selectedTime) {
    // Check if formData is defined
    if (formData && typeof formData !== 'undefined') {
        // Extract relevant form data
        var firstName = formData.get('firstName');
        var lastName = formData.get('lastName');
        var dob = formData.get('dob');
        var birthTime = formData.get('birthTime');
        var phoneNumber = formData.get('phoneNumber');
        var email = formData.get('email');

        // Replace 'your_service_id' and 'your_template_id' with your actual Service ID and Template ID for the customer email
        emailjs.send("service_1us56c1", "template_if5a995", {
            firstName: firstName,
            lastName: lastName,
            dob: dob,
            birthTime: birthTime,
            phoneNumber: phoneNumber,
            email: email,
            selectedDay: selectedDay,
            selectedTime: selectedTime
        }).then(
            function (response) {
                console.log("Customer email sent successfully:", response);
            },
            function (error) {
                console.error("Failed to send customer email:", error);
            }
        );

        // Replace 'your_service_id' and 'your_template_id' with your actual Service ID and Template ID for the astrologer email
        emailjs.send("service_1us56c1", "template_zrx9tw8", {
            firstName: firstName,
            lastName: lastName,
            dob: dob,
            birthTime: birthTime,
            phoneNumber: phoneNumber,
            email: email,
            selectedDay: selectedDay,
            selectedTime: selectedTime
        }).then(
            function (response) {
                console.log("Astrologer email sent successfully:", response);
            },
            function (error) {
                console.error("Failed to send astrologer email:", error);
            }
        );
    } else {
        console.error("Form data is undefined. Make sure to capture it before calling sendConfirmationEmail.");
    }
}
</script>

<section id="contact">
    <h2>Contact Us</h2>
    <div class="contact-info">
        <p>Name: Theo (Po Chen Liao)</p>
        <p>Email: tuturikpa@gmail.com</p>
        <p>Phone No: +886- 983081679</p>
        <p>Facebook: <a href="https://www.facebook.com/XXXX" target="_blank">XXXX</a></p>
        <p>Instagram: <a href="https://www.instagram.com/XXXX" target="_blank">XXXX</a></p>
    </div>
    <!-- Add contact form or additional information here -->
</section>
  
<footer>
    <p>&copy; 2023 Astrology Consultation Booking. All rights reserved.</p>
</footer>

</body>
</html>
