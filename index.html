<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Welcome to Astrology World</title>
      <style>
        body {
            font-family: 'Times New Roman', Times, serif;
            line-height: 1.6;
            margin: 0;
            padding: 0;
            background-color: #f4f4f4;
        }

        header {
            position: relative;
            overflow: hidden;
        }

        video {
            width: 100%;
            height: auto;
            position: absolute;
            z-index: -1;
        }

        .header-content {
            background-color: rgba(0, 0, 0, 0.7);
            color: white;
            padding: 1em;
            text-align: center;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        nav ul {
            list-style: none;
            margin: 0;
            padding: 0;
        }

        nav ul li {
            display: inline;
            margin-right: 10px;
        }

        section {
            padding: 20px;
        }

        footer {
            background-color: #333;
            color: white;
            padding: 1em;
            text-align: center;
            position: fixed;
            bottom: 0;
            width: 100%;
        }

        .astrologer-image {
            max-width: 100px;
            max-height: 100px;
            border-radius: 50%;
            margin-right: 20px;
        }

        .blink-box {
            animation: blink 1s infinite;
            padding: 15px;
            border-radius: 10px;
            display: inline-block;
            margin-top: 20px;
            background-color: #ff3333; /* Red */
        }

        @keyframes blink {
            0% { background-color: #333; color: white; }
            50% { background-color: #fff; color: #333; }
            100% { background-color: #333; color: white; }
        }

        #services p {
            color: #000080; /* Navy Blue */
        }

        #booking a {
            color: #ff3333; /* Red */
            text-decoration: none;
            font-weight: bold;
        }

        .contact-info {
            margin-top: 20px;
        }

        .contact-info p {
            margin: 5px 0;
        }

        table {
            width: 100%;
            border-collapse: collapse;
            margin-bottom: 20px;
        }

        th, td {
            border: 1px solid #ddd;
            padding: 8px;
            text-align: center;
        }

        th {
            background-color: #f2f2f2;
        }

        .slot {
            cursor: pointer;
            background-color: #4CAF50;
            color: white;
        }

        #bookingForm {
            display: none;
            background-color: #fff;
            padding: 20px;
            border-radius: 10px;
            position: fixed;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            z-index: 999;
        }

        #bookingForm label,
        #bookingForm input {
            display: block;
            margin-bottom: 10px;
        }

        #bookingForm button {
            background-color: #4CAF50;
            color: white;
            padding: 10px;
            border: none;
            cursor: pointer;
        }

       .calendar-table {
        width: 100%;
        border-collapse: collapse;
        margin-top: 10px;
    }

    .calendar-table th,
    .calendar-table td {
        border: 1px solid #ddd;
        padding: 8px;
        text-align: center;
        cursor: pointer;
        background-color: #4CAF50; /* Green background */
        color: #ffff00; /* Yellow text */
    }

    .calendar-table th {
        background-color: #45a049; /* Darker green for headers */
    }

    .calendar-table td:hover {
        background-color: #45a049; /* Darker green on hover */
        color: white;
    }
          .navButton {
            background-color: #3498db;
            color: #fff;
            padding: 8px;
            border: none;
            cursor: pointer;
            margin-right: 5px;
            border-radius: 5px;
        }

        .navButton:hover {
            background-color: #2980b9;
        }

    </style>
    <script src="https://cdn.emailjs.com/dist/email.min.js"></script>

</head>
<body>

<header>
    <video autoplay loop muted>
        <source src="IMG/astro.mp4" type="video/mp4">
        Your browser does not support the video tag.
    </video>
    <div class="header-content">
        <img src="IMG/Media.jpg" alt="Astrologer Image" class="astrologer-image">
        <div>
            <h1>Astrology Consultation Booking</h1>
            <nav>
                <ul>
                    <li><a href="#home">Home</a></li>
                    <li><a href="#services">Services</a></li>
                    <li><a href="#booking">Booking</a></li>
                    <li><a href="#contact">Contact</a></li>
                </ul>
            </nav>
        </div>
    </div>
</header>

<section id="home" style="background-color: #f8f8f8; padding: 30px; text-align: center;">
    <div style="text-align: center; padding: 20px;">
        <img src="IMG/astro.jpg" alt="ASTRO" style="max-width: 100%; border-radius: 10px;">
        
    </div>
    <div style="text-align: center;">
        <h2>Welcome to the Cosmic Guidance Center</h2>
        <p>Unlock the secrets of the stars and discover the profound insights they hold for you. At the Cosmic Guidance Center, our team of skilled astrologers is dedicated to providing you with a transformative experience. From personalized one-on-one consultations to detailed chart readings and mystical card readings, our services are designed to guide you on your unique journey.</p>
        <p>Immerse yourself in the ancient wisdom of astrology and let our astrologers unveil the celestial map of your life. Whether you seek clarity on relationships, career choices, or spiritual growth, our cosmic experts are here to assist you.</p>
        <div class="blink-box">
            <a href="#booking">Book a Consultation</a>
        </div>
    </div>
</section>

<section id="services">
    <h2>Our Services</h2>
    <p>Embark on a personalized journey with our one-to-one consultation services, where our experienced astrologers provide insights tailored just for you. Explore the intricacies of your birth chart through our in-depth chart reading sessions, unraveling the cosmic mysteries that shape your unique personality and destiny. Dive into the mystical realm of card reading, where ancient wisdom meets modern guidance, offering clarity and foresight into your life's path. Additionally, we offer a variety of specialized astrology services, including compatibility analysis, career guidance, and spiritual counseling. Let our skilled astrologers illuminate the celestial map of your life, guiding you towards a future filled with cosmic harmony and self-discovery.</p>
    <!-- Add more content as needed -->
</section>

<!-- Add the following code within the #booking section -->
<section id="booking">
    <h2 style="color: #3498db;">Book a Consultation</h2>
    <p>Choose your Preferable Date and Time</p>

    <table id="availabilityTable" style="width: 100%;">
        <caption>Availability Schedule</caption>
        <thead>
            <tr>
                <th>Sun</th>
                <th>Mon</th>
                <th>Tue</th>
                <th>Wed</th>
                <th>Thu</th>
                <th>Fri</th>
                <th>Sat</th>
            </tr>
        </thead>
        <tbody></tbody>
    </table>

   <div id="bookingForm" style="display: none;">
    <h3>Booking Form</h3>
    <form id="userBookingForm" action="/submit-form" method="post">
        <label for="selectedDate">Selected Date: </label>
        <input type="text" id="selectedDate" readonly required>
        <br>

        <label for="selectedTime">Select Time: </label>
        <select id="selectedTime" name="selectedTime" required>
            <option value="8:00 PM - 8:30 PM">8:00 PM - 8:30 PM</option>
            <option value="8:30 PM - 9:00 PM">8:30 PM - 9:00 PM</option>
            <option value="9:00 PM - 9:30 PM">9:00 PM - 9:30 PM</option>
            <option value="9:30 PM - 10:00 PM">9:30 PM - 10:00 PM</option>
            <option value="10:00 PM - 10:30 PM">10:00 PM - 10:30 PM</option>
        </select>
        <br>

        <!-- Additional time selection options can be added here -->

        <!-- Keep the existing form fields -->
        <label for="firstName">First Name:</label>
        <input type="text" id="firstName" name="firstName" required>

        <label for="lastName">Last Name:</label>
        <input type="text" id="lastName" name="lastName" required>

        <label for="dob">Date of Birth:</label>
        <input type="date" id="dob" name="dob" required>

        <label for="birthTime">Birth Time:</label>
        <input type="time" id="birthTime" name="birthTime" required>

        <label for="phoneNumber">Phone Number:</label>
        <input type="tel" id="phoneNumber" name="phoneNumber" required>

        <label for="email">Email:</label>
        <input type="email" id="email" name="email" required>

        <button type="button" onclick="submitBookingForm()">Book Now</button>
        <button type="button" onclick="cancelBookingForm()">Cancel</button>
    </form>
</div>
    <button class="navButton" onclick="showPreviousYear()">Previous Year</button>
    <button class="navButton" onclick="showPreviousMonth()">Previous Month</button>
    <button class="navButton" onclick="showNextMonth()">Next Month</button>
    <button class="navButton" onclick="showNextYear()">Next Year</button>


    <script>
        function showBookingForm(day, date) {
            document.getElementById('bookingForm').style.display = 'block';
            document.getElementById('selectedDate').value = day + ', ' + date;
        }

        function generateCalendar(month, year) {
            var calendarContainer = document.getElementById('availabilityTable');
            calendarContainer.querySelector('tbody').innerHTML = '';

            // Display Month and Year in the caption
            calendarContainer.querySelector('caption').textContent = getMonthName(month) + ' ' + year;

            var firstDay = new Date(year, month, 1);
            var lastDay = new Date(year, month + 1, 0);
            var startingDay = firstDay.getDay();

            if (!calendarContainer.querySelector('tbody')) {
                var tbody = document.createElement('tbody');
                calendarContainer.appendChild(tbody);
            }

            var dateCounter = 1;
            for (var i = 0; i < 6; i++) {
                var row = document.createElement('tr');
                for (var j = 0; j < 7; j++) {
                    var dayCell = document.createElement('td');
                    if (i === 0 && j < startingDay) {
                        // Empty cells before the first day
                        dayCell.textContent = '';
                    } else if (dateCounter <= lastDay.getDate()) {
                        dayCell.textContent = dateCounter;
                        dayCell.setAttribute('data-date', dateCounter);
                        dayCell.setAttribute('data-month', month);
                        dayCell.setAttribute('data-year', year);
                        dayCell.addEventListener('click', function () {
                            var selectedDate = this.getAttribute('data-date');
                            var selectedMonth = this.getAttribute('data-month');
                            var selectedYear = this.getAttribute('data-year');
                            var selectedDay = getDayOfWeek(selectedYear, selectedMonth, selectedDate);
                            showBookingForm(selectedDay, selectedDate);
                        });
                        dateCounter++;
                    }
                    row.appendChild(dayCell);
                }
                calendarContainer.querySelector('tbody').appendChild(row);
            }
        }

        function getMonthName(month) {
            var months = ['January', 'February', 'March', 'April', 'May', 'June', 'July', 'August', 'September', 'October', 'November', 'December'];
            return months[month];
        }

        function showPreviousMonth() {
            var currentDate = new Date(document.getElementById('availabilityTable').querySelector('caption').textContent);
            currentDate.setMonth(currentDate.getMonth() - 1);
            generateCalendar(currentDate.getMonth(), currentDate.getFullYear());
        }

        function showNextMonth() {
            var currentDate = new Date(document.getElementById('availabilityTable').querySelector('caption').textContent);
            currentDate.setMonth(currentDate.getMonth() + 1);
            generateCalendar(currentDate.getMonth(), currentDate.getFullYear());
        }

        function showPreviousYear() {
            var currentDate = new Date(document.getElementById('availabilityTable').querySelector('caption').textContent);
            currentDate.setFullYear(currentDate.getFullYear() - 1);
            generateCalendar(currentDate.getMonth(), currentDate.getFullYear());
        }

        function showNextYear() {
            var currentDate = new Date(document.getElementById('availabilityTable').querySelector('caption').textContent);
            currentDate.setFullYear(currentDate.getFullYear() + 1);
            generateCalendar(currentDate.getMonth(), currentDate.getFullYear());
        }

        function getDayOfWeek(year, month, day) {
            var date = new Date(year, month, day);
            var days = ['Sun', 'Mon', 'Tue', 'Wed', 'Thu', 'Fri', 'Sat'];
            return days[date.getDay()];
        }
        
       window.onload = function () {
            var currentDate = new Date();
            generateCalendar(currentDate.getMonth(), currentDate.getFullYear());
        };
    </script>
    
    <script>
// Move the validateForm function here or make sure it is defined before submitBookingForm
        function validateForm(formData) {
            // List of required field names
            var requiredFields = ['firstName', 'lastName', 'dob', 'birthTime', 'phoneNumber', 'email'];

            // Check if all required fields are filled
            for (var i = 0; i < requiredFields.length; i++) {
                var fieldName = requiredFields[i];
                if (!formData.get(fieldName)) {
                    // Field is empty, validation failed
                    return false;
                }
            }

            // All required fields are filled, validation passed
            return true;
        }
 function submitBookingForm() {
                // Get form data
                var form = document.getElementById('userBookingForm');
                var formData = new FormData(form);

               // Validate form fields
            var validationPassed = validateForm(formData);

            if (validationPassed) {
                // Get selected day and time
                var selectedDate = document.getElementById('selectedDate').value;
                var selectedTime = document.getElementById('selectedTime').value;

                // Use the Fetch API to submit the form data to the Netlify serverless function
                const serverUrl = '/.netlify/functions/submitForm';

                fetch(serverUrl, {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json',
                    },
                    body: JSON.stringify(Object.fromEntries(formData)),
                })
                    .then(response => response.json())
                    .then(data => {
                        console.log('Form submitted successfully:', data);

                        // Pass formData to sendConfirmationEmail
                        sendConfirmationEmail(formData, selectedDate, selectedTime);

                        // Redirect to the custom success page
                        window.location.href = 'success.html';
                    })
                    .catch(error => {
                        console.error('Form submission failed:', error);
                        alert('Booking failed. Please try again later.');
                    });

                // Close the form after submission
                document.getElementById('bookingForm').style.display = 'none';
            } else {
                // Show validation error message
                alert('Please fill in all the required fields before submitting the form.');
            }
        }
        function cancelBookingForm() {
    // Implementation of cancelBookingForm
    document.getElementById('bookingForm').style.display = 'none';
  }
    </script>

<section>
<section id="contact">
    <h2>Contact Us</h2>
    <div class="contact-info">
        <p>Name: Theo (Po Chen Liao)</p>
        <p>Email: tuturikpa@gmail.com</p>
        <p>Phone No: +886- 983081679</p>
        <p>Facebook: <a href="https://www.facebook.com/XXXX" target="_blank">XXXX</a></p>
        <p>Instagram: <a href="https://www.instagram.com/XXXX" target="_blank">XXXX</a></p>
    </div>
    <!-- Add contact form or additional information here -->
</section>
  
<footer>
    <p>&copy; 2023 Astrology Consultation Booking. All rights reserved.</p>
</footer>

</body>
</html>
